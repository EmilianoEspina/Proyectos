<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">

    <title>To Do!</title>

  </head>
  <body>
    <div class="container">

        <div class="row">
            <div class="col-12">
              <h1>To Do</h1>
              <hr>
              <div class="card">
                <div class="card-body">
                  <form method="post" action="" id="formulario">
                    <div class="form-group">
                      <label for="Nota">Pendiente:</label>
                      <input type="text" class="form-control" id="nota">
                      <small id="emailHelp" class="form-text text-muted">Agrege su nota</small>
                    </div>
                      <button type="submit" class="btn btn-primary">Guardar</button>
                  </form>
                </div>
              </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
              <br>
              
              <ul class="list-group" id="lista">

             <!--<li class="list-group-item" >An item <span class="float-right"><i class="bi bi-trash-fill"></i></span></li>
             -->
              </ul>

              <p> Total de notas: <span id="cuenta"></span><span class="float-right"><button type="button" id="borrartodo" class="btn btn-danger btn-sm">Borrar Todo</button></span> </p>

            </div>
        </div>
    </div>

 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> <!-- biblioteca Jquery-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script> <!-- biblioteca Jquery-->
    <script> // nuestro script de Jquery.

      $(document).ready(function(){ // la funcion .ready() es un metodo para comenzar a correr el codigo JavaScript tan pronto como el DOM es seguro de manipular.

        $("#borrartodo").hide();

        var cuenta=$("#lista li.list-group-item").length; // la propiedad lenght es utilizada para contar cantidad de elementos del objeto, devuelve un INT (numero entero).
        $("#cuenta").text(cuenta); // la funcion .text() devuleve un string o valor numerico resultante de la etiqueta.


         $("#formulario").submit(function(e){//la e es de "event" es control global del elemento. 

          e.preventDefault();// con el evento e.preventDefault() la pagina no recarga, sino q espera. 
          var texto=$("#nota").val()//la funcion .val() obtiene el valor de los elementos inputs, formularios y las etiquetas select y textarea.
          //console.log(texto); // es interno como el ptrin_r, muestra q pasa de fondo con el navegador sin q lo vea el ususario, podemos verlo en "inspeccionar".
          $("#lista").append('<li class="list-group-item">'+texto+'<span class="float-right"><i class="bi bi-trash-fill borrar"></i></span> </li>' );  //append agrega un elemento (en este caso li) al final y prepend al principio. 

          var cuenta=$("#lista li.list-group-item").length;
          $("#cuenta").text(cuenta);

          //codigo agregado para hideshow borrartodo
          console.log(cuenta);

          $("#borrartodo").click(function(){

            $("#lista li.list-group-item").remove();
            $("#cuenta").text("0"); 
  
          });
             

          if(cuenta!=0){
          $("#borrartodo").show();
          }


        });
        
        $("#lista").on("click","i.borrar",function(){ // la funcion .on() sirve para asignar eventos DINAMICOS a los elementos del DOM. (se usa para elementos creados dinamicamente, osea mientras sucede la pagina.)

          $(this).closest("li").remove(); //la funcion .closest() busca el elemento mas "cercano" (por estructura del documento) del tipo expresado
                                          //la funcion .remove() elimina un elemento del documento.

          var cuenta=$("#lista li.list-group-item").length;
          $("#cuenta").text(cuenta);
     
        });

          $("#borrartodo").click(function(){

          $(this).hide();
          $("#lista li.list-group-item").remove();
          $("#cuenta").text("0"); // una vez q se borra todo vuelve a declarar el contenido de la etiqueta con .text("0");
          
          
        });    
      }); //aca cierra la funcion .ready()

    </script>
    

  </body>
</html>